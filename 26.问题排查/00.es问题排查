## es问题too many open
es添加一个结点后，其他两台服务器报too many open file，
主要因为es新加入结点后，需要进行同步数据，jvm启动线程进行索引文件的传递。
但是linux有对句柄的限制，limits。这造成无法执行过多的句柄。systemd可以控制当前线程的进程数
父进程会影响子进程的限制
相关指令如下
```
# 查看系统句柄限制
cat /etc/security/limits.conf
# 查看当前进程的限制
cat /proc/<PID>/limits
# 修改systemd告警
在service的配置文件 LimitNOFILE=65536

soft nproc: 单个用户可用的最大进程数量(软限制)

hard nproc： 单个用户可用的最大进程数量(硬限制)

soft nofile：可打开的文件描述符的最大数(软限制)

hard nofile：可打开的文件描述符的最大数(硬限制)
硬限制是指对资源节点和数据块的绝对限制,在任何情况下都不允许用户超过这个限制;

而软限制是指用户可以在一定时间范围内(默认时为一周,在/usr/include/sys/fs/ufs_quota.h文件中设置)超过软限制的额度,在硬限制的范围内继续申请资源,同时系统会在用户登录时给出警告信息和仍可继续申请资源剩余时间.如果达到时间期限,用户的硬盘使用仍超过软限制的额度,则系统将不允许用户再申请硬盘资源.
```
